\subsection{Package description}

Originally speed and steer commands are sent to Gazebo, which has an internal ODE integrator (maybe slightly different). We have detached Gazebo inserting course ODE version to see if results are different.

\subsubsection{Publications and Subscriptions}

\begin{itemize}
	\item ode\_simulator subscribes to /vesc/ackermann\_cmd\_mux/input/navigation in order to receive speed and steer direction to move the car. Gazebo does not subscribe directly to this topic but read from internal topics which interpret input sent by navigation one.
	\item The simulator publishes on /vesc/odom the actual position and rotation of the car, used by both tracker and linearizer.
\end{itemize}

\begin{tikzpicture}
	\node[
	draw,
	fill=White,
	minimum width=2cm,
	minimum height=1.5cm
	] (tracker) {/vesc/odom};
	
	\node[
	draw,
	fill=Green,
	minimum width=2cm,
	minimum height=1.5cm,
	below=3cm of tracker
	] (model) {ODE Integrator};
	
	\node[
	draw,
	fill=White,
	minimum width=2cm,
	minimum height=1.5cm,
	below=3cm of refVelocity
	] (controller) {/vesc/ackermann\_cmd\_mux/input/navigation};	
	
	% ---
	
	\draw[-{Triangle[scale=2]}] ($(controller.west) + (0, 0)$) -- ($(model.east) + (0, 0)$)
	node[midway, above]{SUB to};
	
	% ---
	
	\draw[-{Triangle[scale=2]}] ($(model.north) + (+1/2, 0)$) -- ($(tracker.south) + (+1/2, 0)$)
	node[midway, left]{PUB in};
	
	
\end{tikzpicture}

\subsection{Configuration}

\begin{center}
	\begin{tabularx}{\textwidth}{
			| >{\raggedright\arraybackslash}X
			| >{\arraybackslash}X |
		}
		\hline
		\multicolumn{2}{|c|}{\textbf{Simulator configuration parameters}} \\
		\hline
		/ode\_simulator/tyre\_model & Tyre model (0, linear; 1, fiala with saturation; 2, fiala without saturation) \\
		\hline
		/ode\_simulator/dt & Integration step \\
		\hline
	\end{tabularx}
	
	\vspace{0.5cm}
	
	\begin{tabularx}{\textwidth}{
			| >{\raggedright\arraybackslash}X
			| >{\arraybackslash}X |
		}
		\hline
		\multicolumn{2}{|c|}{\textbf{Vehicle parameters}} \\
		\hline
		/ode\_simulator/m & Vehicle mass \\
		\hline
		/ode\_simulator/cog\_a & Distance of COG from front axle \\
		\hline
		/ode\_simulator/cog\_b & Distance of COG from rear axle \\
		\hline
		/ode\_simulator/mu & Ground friction coefficient \\
		\hline
		/ode\_simulator/Cf & Front cornering stiffness \\
		\hline
		/ode\_simulator/Cr & Rear cornering stiffness \\
		\hline
		/ode\_simulator/Iz & Yaw moment of inertia \\
		\hline
	\end{tabularx}
	
	\vspace{0.5cm}
	
	\begin{tabularx}{\textwidth}{
			| >{\raggedright\arraybackslash}X
			| >{\arraybackslash}X |
		}
		\hline
		\multicolumn{2}{|c|}{\textbf{Vehicle initial state}} \\
		\hline
		/ode\_simulator/r0 & Initial yaw rate \\
		\hline
		/ode\_simulator/beta0 & Initial sideslip \\
		\hline
		/ode\_simulator/x0 & Initial position x \\
		\hline
		/ode\_simulator/y0 & Initial position y \\
		\hline
		/ode\_simulator/psi0 & Initial heading \\
		\hline
	\end{tabularx}
\end{center}